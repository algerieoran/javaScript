<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>formulaire</title>
    <style>
        .red{ border: 2px solid red;}
        .green{ border: 2px solid green;}
    </style>
</head>
<body>
    <div id="message"> </div>

        <form methode="" action="">
            <label for="email">Email</label>
            <input type="text" id="email" name="mdp">
            <br>

            <label for="mdp">Mot de passe</label>
            <input type="password" id="mdp" name="mdp">
            <br>

            <input type="submit" value="s'inscrire">

        </form>


        <script>
            var champEmail = document.getElementById('email');
            var champMdp   = document.getElementById('mdp');

            // 1- on verifis tous les champs quand on clique sur "s'inscrire" :
            document.querySelector('form').addEventListener('submit',function(event){
                // submit se déclanche quand on soumet un formulaire avec l'input type "submit"

                // l'objet "event" dans () de notre function sert à donné (à fournir) des formations sur l'evenement actuellement déclenché. Par exemple, vous pouvez récupérer les touches enfoncées les cooredonnees du curseur, ou bloquer un un evenement tel que l'envoi (=submit) du formulaire. Ce paramètre s'écrit "e" ou "event" par convention.

               var erreur = false;  // pour dire qu'il n'y a pas d'erreur au début. On mettra cette variable à true dès qu' une erreur sera produite sur le formulaire

               // on verifie le champ email :
               if (champEmail.value.indexOf('@') == -1 ) {
                   // la propriété value permet d'accéder  à la valeur saisie par l'internaute dans l'input champEmail. indexof('@') retourne la position de l' @ dans cette valeur. s'il n'y est pas,cette méthode retourne -1 
                   champEmail.classList.add('red'); 
                   erreur = true; // on passe la variable à true pour dire qu'il y a une erreur
                    
               } else {
                   // on est dans le else quand l'@ est dans la valeur de l'input email :
                   champEmail.classList.add('green');
               }
               // on verifie la longeur du champ mdp :
               if (champMdp.value.trim().length < 4 || champMdp.value.trim().length > 25) {
                   // si la longeur de la valeur du champ mdp est inférieur à 4 ou superieure à 25 :
                   champMdp.classList.add('red');
                   erreur = true;  // pour spécifier qu'il y a une erreur
               } else {
                   // si no la longeur est entre 4 et 25 :
                   champMdp.classList.add('green');
               }
               // on fin, s'il y a une erreur (erreur==true), on bloque le formulaire et on met un message à l'internaute :
               if (erreur === true) {
                   //on bloque le "submit" :
               event.preventDefault();  // bloque l'envoi du formulaire. cette m"thode permet de bloquer l'action par défaut d'un evenememt : bloquer un lien, l'envoie d'un formulaire, la coche d'une chekbox, etc.
                document.querySelector('#message').textContent = 'veuillez-vérifier vos saisies !';
               }

            });  // fin du submit------------------------------------------------------------------------------------------------------------------------------------------

            // 2- On réinitialise les champs dès qu'ils change de valeur : ------------------------------------------------------------------------------------------------
            champEmail.addEventListener('change', function () { // l'évenement change se déclanche quand on modifie la valeur de l'input
                this.classList.remove('red','green'); // on retir toutes les classes pour mettre une bordure par défaut 
            });

            champMdp.addEventListener('change', function () {
                this.classList.remove('red','green'); // on retir toutes les classes pour mettre une bordure par défaut 
            });

        </script>

   
    
</body>
</html>